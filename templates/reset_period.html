<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Reset Period</title>
    <script>
        function downloadAndRedirect(pdfUrl, redirectUrl) {
            // Create an invisible link element
            var link = document.createElement('a');
            link.href = pdfUrl;
            link.download = pdfUrl.split('/').pop();
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);

            // Redirect after a delay
            setTimeout(function() {
                window.location.href = redirectUrl;
            }, 3000); // 3 seconds delay
        }
    </script>
</head>
<body onload="downloadAndRedirect('{{ download_link }}', '{{ url_for('complete_reset_period', user_id=user_id) }}')">
    <h1>Resetting Period for {{ username }}</h1>
    <p>Your report is being downloaded. You will be redirected shortly...</p>
</body>
</html>
